<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>Y_CHECK Â· ë©”ì¸</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-[#f7f9fc] text-slate-900 pb-24">

    <!-- ê³µí†µ í—¤ë” -->
    <header class="bg-white border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 h-14 flex items-center justify-between">
            <!-- ë¡œê³  -->
            <div class="flex items-center gap-3">
                <a href="main" class="flex items-center gap-3">
                    <img src="../img/ycheck_logo.png" alt="Y_CHECK ë¡œê³ " class="h-8 w-auto">
                </a>
            </div>

            <!-- ë‚´ë¹„ê²Œì´ì…˜ -->
            <nav class="hidden sm:flex items-center justify-center flex-1 divide-x divide-slate-300" style="margin-left: 90px;">
                <a href="calculator" class="px-6 py-2 text-sm text-slate-600 hover:text-slate-900 font-bold">ê³„ì‚°ê¸°</a>
                <a href="timetable" class="px-6 py-2 text-sm text-slate-600 hover:text-slate-900 font-bold">ì‹œê°„í‘œ</a>
                <a href="sunbae" class="px-6 py-2 text-sm text-slate-600 hover:text-slate-900 font-bold">ì„ ë°°ì˜ ë°œìì·¨</a>
            </nav>

            <!-- ë§ˆì´í˜ì´ì§€ -->
            <div class="hidden sm:block">
                <a href="mypage" class="px-6 py-2 text-sm text-slate-600 hover:text-slate-900 font-bold">ë§ˆì´í˜ì´ì§€</a>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ëŒ€ì‹œë³´ë“œ -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 py-8 grid grid-cols-1 lg:grid-cols-12 gap-6">

        <!-- ì™¼ìª½(í° ì˜ì—­) -->
        <section class="lg:col-span-9 space-y-6">

            <!-- ì´ ì´ìˆ˜ ì§„í–‰ë„ -->
            <div class="bg-white rounded-2xl border shadow-sm p-6 h-40 flex flex-col justify-between">
                <div>
                    <div class="text-sm text-slate-500 font-bold">ì´ ì´ìˆ˜ ì§„í–‰ë„</div>
                    <div class="mt-1 text-4xl font-extrabold tracking-tight">
                        <span id="total-progress-text">0 / 135 ì </span>
                    </div>
                </div>
                <div class="mt-4 flex items-center gap-3">
                    <div class="flex-1 h-3 bg-slate-100 rounded-full overflow-hidden">
                        <div id="total-progress-bar"
                             class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800"
                             style="width:0%"></div>
                    </div>
                    <div id="total-progress-percent"
                         class="w-16 text-right text-lg font-bold text-emerald-600">0%</div>
                </div>
            </div>

            <!-- ì±„í”Œ + ë¶„ë¥˜ë³„ ì´ìˆ˜ ì§„í–‰ë„ -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-stretch">
                <!-- ì±„í”Œ ì¹´ìš´íŠ¸ (ì›í˜• ê·¸ë˜í”„) -->
                <div class="bg-white rounded-2xl border shadow-sm p-5 flex items-center justify-between h-full">
                    <!-- ì™¼ìª½: ì œëª© + ì…ë ¥ -->
                    <div class="flex flex-col gap-3">
                        <div class="text-sm text-slate-500 font-bold">ì±„í”Œ ì¹´ìš´íŠ¸</div>
                        <div class="flex items-center gap-2">
                            <input id="chapel-input"
                                   type="number"
                                   min="0"
                                   max="4"
                                   value="0"
                                   class="w-12 px-3 py-2 rounded-xl border text-sm text-center" />
                            <span class="text-slate-500 text-sm">/ 4</span>
                        </div>
                    </div>

                    <!-- ì˜¤ë¥¸ìª½: ì›í˜• ê·¸ë˜í”„ -->
                    <div class="relative w-28 h-28 sm:w-32 sm:h-32 md:w-36 md:h-36">
                        <svg viewBox="0 0 36 36" class="w-full h-full">
                            <!-- ë°°ê²½ ì› -->
                            <circle cx="18" cy="18" r="15"
                                    fill="none"
                                    stroke-width="4"
                                    class="text-slate-100"
                                    stroke="currentColor"></circle>
                            <!-- ì§„í–‰ ì› -->
                            <circle id="chapel-circle"
                                    cx="18" cy="18" r="15"
                                    fill="none"
                                    stroke-width="4"
                                    stroke-linecap="round"
                                    class="text-blue-500"
                                    stroke="currentColor"
                                    stroke-dasharray="94.2477796077"
                                    stroke-dashoffset="94.2477796077"
                                    transform="rotate(-90 18 18)"></circle>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="chapel-percent-center" class="text-sm font-semibold text-slate-700">0%</span>
                        </div>
                    </div>
                </div>

                <!-- ë¶„ë¥˜ë³„ ì´ìˆ˜ ì§„í–‰ë„ (ê¸°ë³¸ì „ê³µ / ì‹¬í™”ì „ê³µ / 3000ë‹¨ìœ„ ì´ìƒ) -->
                <div class="bg-white rounded-2xl border shadow-sm p-5 lg:col-span-2 h-full flex flex-col">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-sm text-slate-500 font-bold">ë¶„ë¥˜ë³„ ì´ìˆ˜ ì§„í–‰ë„</div>
                        <button id="go-calculator-from-credits"
                                class="text-xs text-blue-600 hover:underline">
                            ìì„¸íˆ ë³´ê¸°
                        </button>
                    </div>

                    <!-- ê¸°ë³¸ì „ê³µ -->
                    <div class="mb-4">
                        <div class="flex justify-between text-sm">
                            <span class="font-medium text-slate-700">ê¸°ë³¸ì „ê³µ</span>
                            <span id="major-basic-text" class="tabular-nums text-slate-700">0 / 36</span>
                        </div>
                        <div class="flex items-center gap-3 mt-2">
                            <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                                <div id="major-basic-bar"
                                     class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800"
                                     style="width:0%"></div>
                            </div>
                            <div id="major-basic-percent"
                                 class="w-10 text-right text-xs font-semibold text-slate-700">0%</div>
                        </div>
                    </div>

                    <!-- ì‹¬í™”ì „ê³µ -->
                    <div class="mb-4">
                        <div class="flex justify-between text-sm">
                            <span class="font-medium text-slate-700">ì‹¬í™”ì „ê³µ</span>
                            <span id="major-deep-text" class="tabular-nums text-slate-700">0 / 36</span>
                        </div>
                        <div class="flex items-center gap-3 mt-2">
                            <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                                <div id="major-deep-bar"
                                     class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800"
                                     style="width:0%"></div>
                            </div>
                            <div id="major-deep-percent"
                                 class="w-10 text-right text-xs font-semibold text-slate-700">0%</div>
                        </div>
                    </div>

                    <!-- 3000ë‹¨ìœ„ ì´ìƒ -->
                    <div>
                        <div class="flex justify-between text-sm">
                            <span class="font-medium text-slate-700">3000ë‹¨ìœ„ ì´ìƒ</span>
                            <span id="level300-text" class="tabular-nums text-slate-700">0 / 45</span>
                        </div>
                        <div class="flex items-center gap-3 mt-2">
                            <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                                <div id="level300-bar"
                                     class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800"
                                     style="width:0%"></div>
                            </div>
                            <div id="level300-percent"
                                 class="w-10 text-right text-xs font-semibold text-slate-700">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- íŠ¸ë™ë³„ ê³¼ëª© ì¶”ì²œ (ë””ìì¸ ê·¸ëŒ€ë¡œ, ë°ì´í„° í•˜ë“œì½”ë”©) -->
            <div class="bg-white rounded-2xl border shadow-sm p-5">
                <div class="mb-4">
                    <div class="text-sm text-slate-500 mb-1 font-bold">íŠ¸ë™ë³„ ê³¼ëª© ì¶”ì²œ</div>
                    <div class="flex items-center gap-2">
                        <div class="text-lg font-semibold">íŠ¸ë™</div>
                        <!-- íŠ¸ë™ ë“œë¡­ë‹¤ìš´ -->
                        <div class="relative text-xs">
                            <button id="track-dropdown-button"
                                    type="button"
                                    class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-slate-200 bg-white text-slate-700 shadow-sm">
                                <span id="track-dropdown-label">AIë¹…ë°ì´í„°</span>
                                <svg class="w-3 h-3" viewBox="0 0 12 12" aria-hidden="true">
                                    <path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5"
                                          fill="none" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </button>

                            <div id="track-dropdown-menu"
                                 class="absolute left-0 mt-2 w-40 bg-white border border-slate-200 rounded-xl shadow-lg py-1 text-xs text-slate-700 hidden z-10">
                                <button type="button" class="block w-full text-left px-4 py-1.5 hover:bg-blue-50" data-track="AIë¹…ë°ì´í„°">
                                    AIë¹…ë°ì´í„°
                                </button>
                                <button type="button" class="block w-full text-left px-4 py-1.5 hover:bg-blue-50" data-track="AIë¯¸ë””ì–´">
                                    AIë¯¸ë””ì–´
                                </button>
                                <button type="button" class="block w-full text-left px-4 py-1.5 hover:bg-blue-50" data-track="AIê³„ì‚°ê³¼í•™">
                                    AIê³„ì‚°ê³¼í•™
                                </button>
                                <button type="button" class="block w-full text-left px-4 py-1.5 hover:bg-blue-50" data-track="ìŠ¤ë§ˆíŠ¸IoT">
                                    ìŠ¤ë§ˆíŠ¸IoT
                                </button>
                                <button type="button" class="block w-full text-left px-4 py-1.5 hover:bg-blue-50" data-track="ì •ë³´ë³´ì•ˆ">
                                    ì •ë³´ë³´ì•ˆ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex items-center justify-between mb-2">
                    <div class="text-sm text-slate-500">ì¶”ì²œ ê³¼ëª© ë¦¬ìŠ¤íŠ¸</div>
                    <button id="track-more-button" class="text-xs text-blue-600 hover:underline">
                        ìì„¸íˆ ë³´ê¸°
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm table-fixed">
                        <colgroup>
                            <col style="width:20%">
                            <col style="width:20%">
                            <col style="width:50%">
                            <col style="width:10%">
                        </colgroup>
                        <thead>
                            <tr class="text-left text-slate-500 border-b">
                                <th class="py-2 pr-2">ë¶„ë¥˜</th>
                                <th class="py-2 pr-2">í•™ì •ë²ˆí˜¸</th>
                                <th class="py-2 pr-2">ê³¼ëª©ëª…</th>
                                <th class="py-2 pr-2">í•™ì </th>
                            </tr>
                        </thead>
                        <tbody id="track-course-tbody">
                            <!-- JSì—ì„œ ë Œë”ë§ -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ìˆ˜ê°• ê³¼ëª© ë¦¬ìŠ¤íŠ¸ (ìµœê·¼ 3ê°œë¥¼ APIë¡œ ë¶ˆëŸ¬ì˜¤ê¸°) -->
            <div class="bg-white rounded-2xl border shadow-sm p-5">
                <div class="flex items-center justify-between">
                    <div class="text-sm text-slate-500 font-bold">ìˆ˜ê°• ê³¼ëª© ë¦¬ìŠ¤íŠ¸</div>
                    <button id="go-calculator-from-course-list"
                            class="text-xs text-blue-600 hover:underline">
                        ìì„¸íˆ ë³´ê¸°
                    </button>
                </div>
                <div class="overflow-x-auto mt-3">
                    <table class="min-w-full text-sm">
                        <thead>
                            <tr class="text-left text-slate-500 border-b">
                                <th class="py-2 pr-4">ê³¼ëª©ëª…</th>
                                <th class="py-2 pr-4">ë¶„ë¥˜</th>
                                <th class="py-2 pr-4">í•™ì </th>
                            </tr>
                        </thead>
                        <tbody id="course-list-body">
                            <!-- /api/curriculum/taken-courses/ ì—ì„œ ìµœê·¼ 3ê°œ ë Œë”ë§ -->
                        </tbody>
                    </table>
                </div>
            </div>

        </section>

        <!-- ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œ -->
        <aside class="lg:col-span-3 flex flex-col space-y-6">

            <!-- í”„ë¡œí•„ -->
            <div class="bg-white rounded-2xl border shadow-sm p-5 h-40 flex items-center">
                <div>
                    <div id="profile-name" class="text-2xl font-extrabold tracking-tight">ë¡œê·¸ì¸ í•„ìš”</div>
                    <div class="mt-1 text-base text-slate-600">
                        <span id="profile-student-id">-</span>
                        <span class="text-slate-400"> / </span>
                        <span id="profile-year">-í•™ë…„</span>
                    </div>
                    <div id="profile-major" class="mt-0.5 text-base text-slate-600"></div>
                </div>
            </div>

            <div class="bg-white rounded-2xl border shadow-sm p-5 min-h-[420px]">
                <div class="flex items-center justify-between mb-3">
                    <div class="text-sm text-slate-500 font-bold">ì‹œê°„í‘œ</div>

                    <!-- ğŸ”¥ APIë¡œ ë¡œë”©ë¨ -->
                    <select id="semester-select"
                            class="text-xs border border-slate-200 rounded-full px-3 py-1 text-slate-700 bg-white">
                        <option value="">í•™ê¸° ë¡œë”©ì¤‘...</option>
                    </select>
                </div>

                <div class="relative overflow-x-auto">
                    <table class="w-full text-sm text-center border-collapse table-fixed">
                        <thead>
                            <tr class="text-slate-600">
                                <th class="w-12 py-2 border border-slate-200"></th>
                                <th class="py-2 border border-slate-200">ì›”</th>
                                <th class="py-2 border border-slate-200">í™”</th>
                                <th class="py-2 border border-slate-200">ìˆ˜</th>
                                <th class="py-2 border border-slate-200">ëª©</th>
                                <th class="py-2 border border-slate-200">ê¸ˆ</th>
                            </tr>
                        </thead>
                        <tbody id="timetable-body"></tbody>
                    </table>

                    <div class="pointer-events-none absolute inset-x-0 bottom-4 flex justify-center">
                        <button id="timetable-more-button"
                                class="pointer-events-auto px-4 py-1.5 rounded-full border border-slate-200 bg-white/80 text-xs text-slate-700 shadow-sm hover:bg-blue-50">
                            ë”ë³´ê¸°
                        </button>
                    </div>
                </div>
            </div>


            <!-- ì¡¸ì—… ìš”êµ¬ì‚¬í•­ ë©”ëª¨ (localStorage) -->
            <div class="bg-white rounded-2xl border shadow-sm p-5">
                <div class="text-sm text-slate-500 mb-2 font-bold">ì¡¸ì—… ìš”êµ¬ì‚¬í•­ (ë©”ëª¨)</div>
                <textarea id="memo-text"
                          class="w-full h-40 rounded-2xl border px-3 py-2 text-sm resize-none"
                          placeholder="- ì¡¸ì—…ì‘í’ˆ / ì¡¸ì—…ë…¼ë¬¸ ì¤‘ íƒ1&#10;- í† ìµ 800+"></textarea>
            </div>

        </aside>
    </main>

    <!-- í‘¸í„° -->
    <footer class="absolute bottom inset-x-0 bg-white border-t w-full">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex items-start justify-between">
            <div class="flex items-start gap-4">
                <div class="space-y-0.5 text-sm text-slate-600 leading-tight">
                    <div>Inc: ê°•ì›íŠ¹ë³„ìì¹˜ë„ ì›ì£¼ì‹œ í¥ì—…ë©´ ì—°ì„¸ëŒ€ê¸¸ 1</div>
                    <div>Instagram: @Y_CHECK.YONSEI</div>
                    <div>Email: YCHECK2025@gmail.com</div>
                </div>
            </div>
            <div class="flex items-center gap-6 text-sm text-slate-600 leading-tight" style="margin-top: 12px;">
                <span class="hidden sm:block h-6 w-px bg-slate-200"></span>
                <a href="#" class="text-xs text-black-600 hover:underline" id="open-makers-modal"><span>ë§Œë“ ì´ë“¤</span></a>
                <a href="#" class="text-xs text-black-600 hover:underline" id="open-contact-modal"><span>ë¬¸ì˜í•˜ê¸°</span></a>
            </div>
        </div>
    </footer>

    <!-- ë§Œë“ ì´ë“¤ ëª¨ë‹¬ -->
    <div id="makers-modal-overlay"
         class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 hidden">
        <div class="bg-white rounded-2xl px-6 py-8 w-full max-w-md shadow-xl relative">
            <button id="close-makers-modal"
                    class="absolute top-3 right-3 text-slate-500 hover:text-slate-700 text-2xl font-bold"
                    aria-label="ë‹«ê¸°">
                &times;
            </button>
            <h2 class="text-xl font-bold mb-4 text-center">ë§Œë“ ì´ë“¤</h2>
            <div class="space-y-2 text-sm text-slate-700">
                <div><strong>PM</strong> â€“ CHOI</div>
                <div><strong>Back-end</strong> â€“ KIM / MA</div>
                <div><strong>Front-end</strong> â€“ YU / LEE</div>
                <hr class="my-2">
                <div class="text-xs text-slate-500">
                    Y_CHECK ì„œë¹„ìŠ¤ëŠ” ìœ„ íŒ€ì›ì´ í•¨ê»˜ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.<br>
                    ê¶ê¸ˆí•œ ì ì€ ì–¸ì œë“  ë¬¸ì˜í•´ ì£¼ì„¸ìš”!
                </div>
            </div>
        </div>
    </div>

    <!-- ë¬¸ì˜í•˜ê¸° ëª¨ë‹¬ -->
    <div id="contact-modal-overlay"
         class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 hidden">
        <div class="bg-white rounded-2xl px-6 py-8 w-full max-w-md shadow-xl relative">
            <button id="close-contact-modal"
                    class="absolute top-3 right-3 text-slate-500 hover:text-slate-700 text-2xl font-bold"
                    aria-label="ë‹«ê¸°">
                &times;
            </button>
            <h2 class="text-xl font-bold mb-4 text-center">ë¬¸ì˜í•˜ê¸°</h2>

            <form id="contact-form" class="space-y-4">
                <div>
                    <label for="inquiry-type" class="block text-sm font-medium text-slate-700 mb-1">ë¬¸ì˜ ì¢…ë¥˜</label>
                    <select id="inquiry-type" name="inquiry-type"
                            class="w-full border rounded-xl px-3 py-2 text-sm">
                        <option value="ë²„ê·¸">ë²„ê·¸ ì œë³´</option>
                        <option value="ê°œì„ ">ê¸°ëŠ¥/UX ê°œì„ </option>
                        <option value="ë¬¸ì˜">ì„œë¹„ìŠ¤ ë¬¸ì˜</option>
                        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                    </select>
                </div>

                <div id="custom-type-wrap" class="hidden">
                    <label for="custom-type" class="block text-sm font-medium text-slate-700 mb-1">ì„¸ë¶€ ì¢…ë¥˜</label>
                    <input id="custom-type" name="custom-type" type="text"
                           class="w-full border rounded-xl px-3 py-2 text-sm"
                           placeholder="ì˜ˆ: ì¡¸ì—…ìš”ê±´ ê³„ì‚°ì‹ ê´€ë ¨ ë¬¸ì˜" />
                </div>

                <div>
                    <label for="inquiry-content" class="block text-sm font-medium text-slate-700 mb-1">ë‚´ìš©</label>
                    <textarea id="inquiry-content" name="inquiry-content"
                              class="w-full border rounded-xl px-3 py-2 text-sm resize-none h-32"
                              placeholder="ë¬¸ì˜í•˜ì‹¤ ë‚´ìš©ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”."></textarea>
                </div>

                <button type="submit"
                        class="w-full bg-blue-600 text-white text-sm font-semibold py-2 rounded-xl hover:bg-blue-700">
                    ë³´ë‚´ê¸°
                </button>
            </form>

            <div id="contact-success" class="hidden text-center text-sm text-emerald-600 mt-4">
                ë¬¸ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!
            </div>
        </div>
    </div>

    <!-- ëª¨ë‹¬ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        const openMakersBtn = document.getElementById('open-makers-modal');
        const makersModal = document.getElementById('makers-modal-overlay');
        const closeMakersBtn = document.getElementById('close-makers-modal');
        if (openMakersBtn && makersModal && closeMakersBtn) {
            openMakersBtn.addEventListener('click', function (e) {
                e.preventDefault();
                makersModal.classList.remove('hidden');
            });
            closeMakersBtn.addEventListener('click', function () {
                makersModal.classList.add('hidden');
            });
            makersModal.addEventListener('click', function (e) {
                if (e.target === makersModal) {
                    makersModal.classList.add('hidden');
                }
            });
            document.addEventListener('keydown', function (e) {
                if (!makersModal.classList.contains('hidden') && e.key === 'Escape') {
                    makersModal.classList.add('hidden');
                }
            });
        }

        const openContactBtn = document.getElementById('open-contact-modal');
        const contactModal = document.getElementById('contact-modal-overlay');
        const closeContactBtn = document.getElementById('close-contact-modal');
        if (openContactBtn && contactModal && closeContactBtn) {
            openContactBtn.addEventListener('click', function (e) {
                e.preventDefault();
                contactModal.classList.remove('hidden');
            });
            closeContactBtn.addEventListener('click', function () {
                contactModal.classList.add('hidden');
            });
            contactModal.addEventListener('click', function (e) {
                if (e.target === contactModal) {
                    contactModal.classList.add('hidden');
                }
            });
            document.addEventListener('keydown', function (e) {
                if (!contactModal.classList.contains('hidden') && e.key === 'Escape') {
                    contactModal.classList.add('hidden');
                }
            });

            const inquiryType = document.getElementById('inquiry-type');
            const customTypeWrap = document.getElementById('custom-type-wrap');
            const customTypeInput = document.getElementById('custom-type');
            if (inquiryType && customTypeWrap && customTypeInput) {
                inquiryType.addEventListener('change', function () {
                    if (this.value === 'ê¸°íƒ€') {
                        customTypeWrap.classList.remove('hidden');
                        customTypeInput.setAttribute('required', 'required');
                    } else {
                        customTypeWrap.classList.add('hidden');
                        customTypeInput.value = '';
                        customTypeInput.removeAttribute('required');
                    }
                });
            }

            const contactForm = document.getElementById('contact-form');
            const contactSuccess = document.getElementById('contact-success');
            if (contactForm && contactSuccess) {
                contactForm.addEventListener('submit', function (e) {
                    e.preventDefault();
                    contactForm.classList.add('hidden');
                    contactSuccess.classList.remove('hidden');
                    setTimeout(() => {
                        contactModal.classList.add('hidden');
                        contactForm.reset();
                        contactForm.classList.remove('hidden');
                        customTypeWrap.classList.add('hidden');
                        contactSuccess.classList.add('hidden');
                    }, 1800);
                });
            }
        }
    </script>

    <!-- ì±„í”Œ/ë©”ëª¨ ë¡œì»¬ ì €ì¥ -->
    <script>
        /* ------------------------------------
           ì´ˆê¸° ë¡œì§: localStorage, í”„ë¡œí•„, í•™ì , ìµœê·¼ ê³¼ëª© ë¦¬ìŠ¤íŠ¸
        ------------------------------------ */
        const STATE_KEY = "ycheck-main-state-v1";

        const chapelInput = document.getElementById("chapel-input");
        const chapelCircle = document.getElementById("chapel-circle");
        const chapelPercentCenter = document.getElementById("chapel-percent-center");
        const memoText = document.getElementById("memo-text");

        const CHAPEL_CIRC = 94.2477796077;

        function loadState() {
            try {
                const raw = localStorage.getItem(STATE_KEY);
                if (!raw) return;
                const state = JSON.parse(raw);
                if (typeof state.chapel === "number" && chapelInput) {
                    chapelInput.value = state.chapel;
                }
                if (typeof state.memo === "string" && memoText) {
                    memoText.value = state.memo;
                }
            } catch (e) {
                console.warn("state load error", e);
            }
        }

        function saveState() {
            try {
                const data = {
                    chapel: chapelInput ? Number(chapelInput.value || 0) : 0,
                    memo: memoText ? memoText.value : ""
                };
                localStorage.setItem(STATE_KEY, JSON.stringify(data));
            } catch (e) {
                console.warn("state save error", e);
            }
        }

        function updateChapelUI() {
            if (!chapelInput || !chapelCircle) return;
            const max = 4;
            let v = Number(chapelInput.value || 0);
            if (v < 0) v = 0;
            if (v > max) v = max;
            chapelInput.value = v;

            const pct = Math.round((v / max) * 100);

            if (chapelPercentCenter) {
                chapelPercentCenter.textContent = pct + "%";
            }

            const offset = CHAPEL_CIRC * (1 - pct / 100);
            chapelCircle.style.strokeDasharray = CHAPEL_CIRC;
            chapelCircle.style.strokeDashoffset = offset;
        }


        /* ------------------------------------
              í”„ë¡œí•„ / í•™ì  ìš”ì•½ / ê³¼ëª© ë¦¬ìŠ¤íŠ¸ API
        ------------------------------------ */
        async function loadProfile() {
            try {
                const resp = await fetch("/api/login-status/", {method: "GET", credentials: "include"});
                if (!resp.ok) return;
                const data = await resp.json();
                if (!data.logged_in) return;

                const p = data.profile || {};
                document.getElementById("profile-name").textContent = (p.real_name || "í•™ìƒ") + "ë‹˜";
                document.getElementById("profile-student-id").textContent = p.student_id || "-";
                document.getElementById("profile-year").textContent = p.current_semester
                    ? p.current_semester.replace("-", "í•™ë…„ ") + "í•™ê¸°"
                    : "-í•™ë…„";
                document.getElementById("profile-major").textContent = p.major_department || "";

            } catch (e) {
                console.error(e);
            }
        }

        async function loadCreditSummary() {
            try {
                const resp = await fetch("/api/curriculum/credit-summary/", {method: "GET", credentials: "include"});
                if (!resp.ok) return;
                const s = await resp.json();

                const requiredTotal = 135;
                const pct = Math.min(100, Math.round((s.total_credits / requiredTotal) * 100));

                document.getElementById("total-progress-text").textContent =
                    `${s.total_credits} / ${requiredTotal} ì `;
                document.getElementById("total-progress-bar").style.width = pct + "%";
                document.getElementById("total-progress-percent").textContent = pct + "%";

                updateCategory("major-basic", s.MAJOR_BASIC || 0, 36);
                updateCategory("major-deep", s.MAJOR_DEEP || 0, 36);
                updateCategory("level300", s.LEVEL300 || 0, 45);

            } catch (e) {
                console.error(e);
            }
        }

        function updateCategory(prefix, earned, required) {
            const pct = required > 0 ? Math.min(100, Math.round((earned / required) * 100)) : 0;

            document.getElementById(`${prefix}-text`).textContent = `${earned} / ${required}`;
            document.getElementById(`${prefix}-bar`).style.width = pct + "%";
            document.getElementById(`${prefix}-percent`).textContent = pct + "%";
        }

        function convertCategory(cat) {
            const map = {
                "GE_BASIC": "êµì–‘ê¸°ì´ˆ",
                "GE_UNIV_REQUIRED": "ëŒ€í•™êµì–‘í•„ìˆ˜",
                "GE_UNIV_ELECTIVE_1": "êµì–‘ì„ íƒ 1ì˜ì—­",
                "GE_UNIV_ELECTIVE_2": "êµì–‘ì„ íƒ 2ì˜ì—­",
                "GE_UNIV_ELECTIVE_3": "êµì–‘ì„ íƒ 3ì˜ì—­",
                "GE_UNIV_ELECTIVE_4": "êµì–‘ì„ íƒ 4ì˜ì—­",
                "GE_UNIV_ELECTIVE_5": "êµì–‘ì„ íƒ 5ì˜ì—­",
                "GE_UNIV_ELECTIVE_6": "êµì–‘ì„ íƒ 6ì˜ì—­",
                "GE_UNIV_ELECTIVE_9": "êµì–‘ì„ íƒ 9ì˜ì—­",
                "EXPLORATION": "ì „ê³µíƒìƒ‰",
                "MAJOR_BASIC": "ê¸°ë³¸ì „ê³µ",
                "MAJOR_DEEP": "ì‹¬í™”ì „ê³µ",
                "LEVEL300": "3000ë‹¨ìœ„ ì´ìƒ"
            };
            return map[cat] || cat;
        }

        async function loadCourseList() {
            try {
                const resp = await fetch("/api/curriculum/taken-courses/", {
                    method: "GET",
                    credentials: "include",
                });
                if (!resp.ok) return;

                const courses = await resp.json();
                const recent = courses.slice().sort((a, b) => (b.id || 0) - (a.id || 0)).slice(0, 3);

                const tbody = document.getElementById("course-list-body");
                tbody.innerHTML = "";
                recent.forEach(c => {
                    const tr = document.createElement("tr");
                    tr.className = "border-b";
                    tr.innerHTML = `
                <td class="py-2 pr-4">${c.name}</td>
                <td class="py-2 pr-4">${convertCategory(c.category)}</td>
                <td class="py-2 pr-4">${c.credits}</td>
            `;
                    tbody.appendChild(tr);
                });

            } catch (e) {
                console.error(e);
            }
        }


        /* ------------------------------------
              ì‹œê°„í‘œ API + ë Œë”ë§
        ------------------------------------ */
        const DAYS = ["MON", "TUE", "WED", "THU", "FRI"];
        const PERIODS = [1, 2, 3, 4, 5, 6];
        const TIME_LABEL = {
            1: "09:00",
            2: "10:00",
            3: "11:00",
            4: "12:00",
            5: "13:00",
            6: "14:00",
        };

        const semesterSelect = document.getElementById("semester-select");
        const timetableBody = document.getElementById("timetable-body");

        async function loadMainSemesters() {
            try {
                const res = await fetch("/api/timetable/semesters/", {
                    method: "GET",
                    credentials: "include",
                });

                const data = await res.json();
                const semesters = Array.isArray(data) ? data : data.semesters || [];

                semesterSelect.innerHTML = "";
                semesters.forEach(s => {
                    const opt = document.createElement("option");
                    opt.value = `${s.year}-${s.semester}`;
                    opt.textContent = `${s.year}-${s.semester}`;
                    semesterSelect.appendChild(opt);
                });

                if (semesters.length > 0) {
                    semesterSelect.value = `${semesters[0].year}-${semesters[0].semester}`;
                }

            } catch (err) {
                console.error("í•™ê¸° ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:", err);
            }
        }

        function renderMainTimetable(entries) {
            if (!timetableBody) return;
            timetableBody.innerHTML = "";

            PERIODS.forEach(period => {
                const tr = document.createElement("tr");

                const timeTd = document.createElement("td");
                timeTd.className = "h-20 border border-slate-200 text-slate-500 text-xs align-middle";
                timeTd.textContent = TIME_LABEL[period];
                tr.appendChild(timeTd);

                DAYS.forEach(day => {
                    const td = document.createElement("td");
                    td.className = "h-20 border border-slate-200 text-[11px] px-2 align-middle";

                    const matched = entries.find(e => e.day === day && e.period === period);
                    if (matched) {
                        td.innerHTML = `<div class="font-medium text-slate-700">${matched.subject}</div>`;
                        td.classList.add("bg-blue-50");
                    }

                    tr.appendChild(td);
                });

                timetableBody.appendChild(tr);
            });
        }

        async function loadMainTimetable() {
            const val = semesterSelect.value;
            if (!val) return renderMainTimetable([]);

            const [year, semester] = val.split("-");

            try {
                const res = await fetch(`/api/timetable/?year=${year}&semester=${semester}`, {
                    method: "GET",
                    credentials: "include",
                });

                if (res.status === 404) return renderMainTimetable([]);

                const data = await res.json();
                const entries = Array.isArray(data) ? data : data.timetable || [];
                renderMainTimetable(entries);

            } catch (err) {
                console.error("ì‹œê°„í‘œ API ì˜¤ë¥˜:", err);
            }
        }


        /* ------------------------------------
              íŠ¸ë™ë³„ ê³¼ëª© ì¶”ì²œ (í•˜ë“œì½”ë”©)
        ------------------------------------ */
        const TRACK_COURSES = {
            'AIë¹…ë°ì´í„°': [
                {category: 'ì „ì„ ', code: 'SWE3006', name: 'AIìˆ˜í•™', credit: 3},
                {category: 'ì „í•„', code: 'SWE3016', name: 'ì¸ê³µì§€ëŠ¥', credit: 3},
                {category: 'ì „í•„', code: 'SWE3017', name: 'ë°ì´í„°ë² ì´ìŠ¤', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3018', name: 'ë°ì´í„°ë§ˆì´ë‹', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4002', name: 'ì›¹ì„œë¹„ìŠ¤ì‘ìš©', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4003', name: 'ê¸°ê³„í•™ìŠµê°œë¡ ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4004', name: 'ë¹…ë°ì´í„°ì²˜ë¦¬', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4015', name: 'ìì—°ì–´ì²˜ë¦¬', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4016', name: 'ë°”ì´ì˜¤ì»´í“¨íŒ…', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4017', name: 'ì •ë³´ê²€ìƒ‰', credit: 3},
            ],
            'AIë¯¸ë””ì–´': [
                {category: 'ì „ì„ ', code: 'SWE2005', name: 'íšŒë¡œì´ë¡ ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE2011', name: 'ì‹ í˜¸ë°ì‹œìŠ¤í…œ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3006', name: 'AIìˆ˜í•™', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3011', name: 'ì˜ìƒì²˜ë¦¬', credit: 3},
                {category: 'ì „í•„', code: 'SWE3016', name: 'ì¸ê³µì§€ëŠ¥', credit: 3},
                {category: 'ì „í•„', code: 'SWE3019', name: 'ë””ì§€í„¸ì‹ í˜¸ì²˜ë¦¬', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4003', name: 'ê¸°ê³„í•™ìŠµê°œë¡ ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4005', name: 'ì§€ëŠ¥í˜•ë©€í‹°ë¯¸ë””ì–´ì‹œìŠ¤í…œ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4018', name: 'ìŠ¤ë§ˆíŠ¸ë¯¸ë””ì–´í†µì‹ ', credit: 3},
            ],
            'AIê³„ì‚°ê³¼í•™': [
                {category: 'ì „ì„ ', code: 'SWE2012', name: 'ì„ í˜•ëŒ€ìˆ˜ì…ë¬¸', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3005', name: 'ì„ í˜•ëŒ€ìˆ˜í™œìš©', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3006', name: 'AIìˆ˜í•™', credit: 3},
                {category: 'ì „í•„', code: 'SWE3016', name: 'ì¸ê³µì§€ëŠ¥', credit: 3},
                {category: 'ì „í•„', code: 'SWE3020', name: 'ìˆ˜ì¹˜í•´ì„ê³¼ìµœì í™”', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3021', name: 'ê·¸ë˜í”„ì´ë¡ ê³¼í™œìš©', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4003', name: 'ê¸°ê³„í•™ìŠµê°œë¡ ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4006', name: 'ìˆ˜ì¹˜í¸ë¯¸ë¶„ë°©ì •ì‹', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4007', name: 'ë¡œë´‡ì•Œê³ ë¦¬ì¦˜', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4019', name: 'ëª¨ë¸ë§ë°ì‹œë®¬ë ˆì´ì…˜', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4020', name: 'ì‚°ì—…ìˆ˜í•™ê³¼ì—­ë¬¸ì œ', credit: 3},
            ],
            'ìŠ¤ë§ˆíŠ¸IoT': [
                {category: 'ì „ì„ ', code: 'SWE3007', name: 'ë§ˆì´í¬ë¡œí”„ë¡œì„¸ì„œ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3008', name: 'í†µì‹ ì‹œìŠ¤í…œ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3012', name: 'ë””ì§€í„¸í†µì‹ ', credit: 3},
                {category: 'ì „í•„', code: 'SWE3022', name: 'ì„ë² ë””ë“œì‹œìŠ¤í…œ', credit: 3},
                {category: 'ì „í•„', code: 'SWE3023', name: 'ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3024', name: 'ì •ë³´ë³´ì•ˆ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4008', name: 'ì„ë² ë””ë“œí•˜ë“œì›¨ì–´ì„¤ê³„', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4009', name: 'ë°ì´í„°í†µì‹ ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4021', name: 'IoTì‘ìš©í”„ë¡œê·¸ë˜ë°', credit: 3},
            ],
            'ì •ë³´ë³´ì•ˆ': [
                {category: 'ì „í•„', code: 'SWE3009', name: 'ì•”í˜¸í•™', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE3023', name: 'ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬', credit: 3},
                {category: 'ì „í•„', code: 'SWE3024', name: 'ì •ë³´ë³´ì•ˆ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4002', name: 'ì›¹ì„œë¹„ìŠ¤ì‘ìš©', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4009', name: 'ë°ì´í„°í†µì‹ ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4010', name: 'ì»´í“¨í„°ë³´ì•ˆ', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4022', name: 'ì •ë³´ë³´ì•ˆì‘ìš©', credit: 3},
                {category: 'ì „ì„ ', code: 'SWE4023', name: 'ë””ì§€í„¸í¬ë Œì‹', credit: 3},
            ],
        };


        function initTrackRecommendation() {
            const trackLabel = document.getElementById("track-dropdown-label");
            const trackMenu = document.getElementById("track-dropdown-menu");
            const trackBtn = document.getElementById("track-dropdown-button");
            const trackMoreBtn = document.getElementById("track-more-button");
            const trackTbody = document.getElementById("track-course-tbody");

            let currentTrack = "AIë¹…ë°ì´í„°";
            let expanded = false;

            function renderTrack() {
                const list = TRACK_COURSES[currentTrack] || [];
                const show = expanded ? list : list.slice(0, 3);

                trackTbody.innerHTML = "";
                show.forEach(c => {
                    const tr = document.createElement("tr");
                    tr.className = "border-b";

                    tr.innerHTML = `
                <td class="py-2 pr-2">${c.category}</td>
                <td class="py-2 pr-2">${c.code}</td>
                <td class="py-2 pr-2">${c.name}</td>
                <td class="py-2 pr-2">${c.credit}</td>
            `;
                    trackTbody.appendChild(tr);
                });
            }

            trackBtn.addEventListener("click", () => {
                trackMenu.classList.toggle("hidden");
            });

            trackMenu.querySelectorAll("button").forEach(btn => {
                btn.addEventListener("click", () => {
                    currentTrack = btn.dataset.track;
                    trackLabel.textContent = currentTrack;
                    expanded = false;
                    renderTrack();
                    trackMenu.classList.add("hidden");
                });
            });

            trackMoreBtn.addEventListener("click", () => {
                expanded = !expanded;
                renderTrack();
                trackMoreBtn.textContent = expanded ? "ì ‘ê¸°" : "ìì„¸íˆ ë³´ê¸°";
            });

            renderTrack();
        }


        /* ------------------------------------
              í˜ì´ì§€ ë¡œë”© ì‹œì 
        ------------------------------------ */
        document.addEventListener("DOMContentLoaded", async () => {


            // ë¡œì»¬ ì €ì¥ ë¡œë”©
            loadState();
            updateChapelUI();


            chapelInput?.addEventListener("input", () => {
                updateChapelUI();
                saveState();
            });
            memoText?.addEventListener("input", saveState);

            // API ë°ì´í„° ë¡œë”©
            loadProfile();
            loadCreditSummary();
            loadCourseList();

            // ì‹œê°„í‘œ
            await loadMainSemesters();
            await loadMainTimetable();
            semesterSelect?.addEventListener("change", loadMainTimetable);

            // íŠ¸ë™ ì¶”ì²œ ì´ˆê¸°í™”
            initTrackRecommendation();

        });

            document.addEventListener("DOMContentLoaded", () => {
            // 1) ë¶„ë¥˜ë³„ ì´ìˆ˜ ì§„í–‰ë„ â†’ ê³„ì‚°ê¸° ì´ë™
            const btnCredits = document.getElementById("go-calculator-from-credits");
            if (btnCredits) {
            btnCredits.addEventListener("click", () => {
            window.location.href = "calculator";
        });
        }

            // 2) ìˆ˜ê°• ê³¼ëª© ë¦¬ìŠ¤íŠ¸ â†’ ê³„ì‚°ê¸° ì´ë™
            const btnCourseList = document.getElementById("go-calculator-from-course-list");
            if (btnCourseList) {
            btnCourseList.addEventListener("click", () => {
            window.location.href = "calculator";
        });
        }

            // 3) ì‹œê°„í‘œ ë”ë³´ê¸° â†’ ì‹œê°„í‘œ í˜ì´ì§€ ì´ë™
            const btnTimetableMore = document.getElementById("timetable-more-button");
            if (btnTimetableMore) {
            btnTimetableMore.addEventListener("click", () => {
            window.location.href = "timetable";
        });
        }
        });

    </script>


</body>
</html>
