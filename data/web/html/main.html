<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Y-CHECK Â· ë©”ì¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print{.no-print{display:none!important}}
  </style>
</head>
<body class="min-h-screen bg-[#f7f9fc] text-slate-900 pb-24">

  <!-- ê³µí†µ í—¤ë” -->
  <header class="bg-white border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 h-14 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <a href="main.html" class="flex items-center gap-3">
          <img src="../img/ycheck_logo.png" alt="Y-CHECK ë¡œê³ " class="h-8 w-auto">
        </a>
        <div class="h-4 w-px bg-slate-200"></div>
        <div class="text-sm text-slate-600">ì—°ì„¸ëŒ€í•™êµ ì¡¸ì—…ìš”ê±´ê³„ì‚°ê¸°</div>
      </div>
      <nav class="hidden sm:flex items-center gap-6 text-sm text-slate-600">
        <a href="calculator.html" class="hover:text-slate-900">ê³„ì‚°ê¸°</a>
        <a href="timetable.html" class="hover:text-slate-900">ì‹œê°„í‘œ</a>
        <a href="sunbae.html" class="hover:text-slate-900">ì„ ë°°ë“¤ì˜ ë°œìì·¨</a>
        <a href="mypage.html" class="hover:text-slate-900">ë§ˆì´í˜ì´ì§€</a>
      </nav>
    </div>
  </header>

  <!-- ë©”ì¸ ëŒ€ì‹œë³´ë“œ -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 py-8 grid grid-cols-1 lg:grid-cols-12 gap-6">

    <!-- ì™¼ìª½(í° ì˜ì—­) -->
    <section class="lg:col-span-9 space-y-6">

      <!-- ì´ ì´ìˆ˜ ì§„í–‰ë„ (í”„ë¡œí•„ê³¼ ë†’ì´ ë§ì¶¤: h-40) -->
      <div class="bg-white rounded-2xl border shadow-sm p-6 h-40 flex flex-col justify-between">
        <div>
          <div class="text-sm text-slate-500">ì´ ì´ìˆ˜ ì§„í–‰ë„</div>
          <div class="mt-1 text-4xl font-extrabold tracking-tight">
            123 <span class="text-slate-400">/</span> 133 <span class="text-slate-400">ì </span>
          </div>
        </div>
        <div class="mt-4 flex items-center gap-3">
          <div class="flex-1 h-3 bg-slate-100 rounded-full overflow-hidden">
            <div class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800" style="width:92%"></div>
          </div>
          <div class="w-16 text-right text-lg font-bold text-emerald-600">92%</div>
        </div>
      </div>

      <!-- ì„±ì ë¹„ìœ¨ + ì´ìˆ˜í•™ì  -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- ì„±ì  ë¹„ìœ¨ : ë„ë„› ê·¸ë˜í”„ -->
        <div class="bg-white rounded-2xl border shadow-sm p-5">
          <div class="text-sm text-slate-500 mb-3">ì„±ì  ë¹„ìœ¨</div>
          <div class="grid grid-cols-2 gap-4 items-center">
            <!-- ë„ë„› -->
            <div class="flex justify-center">
              <svg viewBox="0 0 120 120" class="w-32 h-32">
                <!-- ë°”íƒ• ì› -->
                <circle cx="60" cy="60" r="40" fill="none" stroke="#e5edff" stroke-width="16" />
                <!-- A+~A0 (íŒŒë‘) -->
                <circle
                  cx="60" cy="60" r="40"
                  fill="none"
                  stroke="#2563eb"
                  stroke-width="16"
                  stroke-linecap="round"
                  stroke-dasharray="118 999"
                  stroke-dashoffset="-90"
                  transform="rotate(-90 60 60)"
                />
                <!-- B+~B0 (í•‘í¬) -->
                <circle
                  cx="60" cy="60" r="40"
                  fill="none"
                  stroke="#f43f5e"
                  stroke-width="16"
                  stroke-linecap="round"
                  stroke-dasharray="111 999"
                  stroke-dashoffset="-208"
                  transform="rotate(-90 60 60)"
                />
                <!-- C+~C0 (ë…¸ë‘) -->
                <circle
                  cx="60" cy="60" r="40"
                  fill="none"
                  stroke="#f59e0b"
                  stroke-width="16"
                  stroke-linecap="round"
                  stroke-dasharray="18 999"
                  stroke-dashoffset="-319"
                  transform="rotate(-90 60 60)"
                />
                <!-- ê°€ìš´ë° í°ìƒ‰ì›ìœ¼ë¡œ ë„ë„› êµ¬ë© -->
                <circle cx="60" cy="60" r="24" fill="white" />
              </svg>
            </div>
            <!-- ë²”ë¡€ -->
            <ul class="text-sm space-y-1">
              <li class="flex items-center gap-2">
                <span class="inline-block w-3 h-3 rounded-full" style="background:#2563eb"></span>
                <span>A+~A0</span><span class="ml-auto text-slate-500">47%</span>
              </li>
              <li class="flex items-center gap-2">
                <span class="inline-block w-3 h-3 rounded-full" style="background:#f43f5e"></span>
                <span>B+~B0</span><span class="ml-auto text-slate-500">44%</span>
              </li>
              <li class="flex items-center gap-2">
                <span class="inline-block w-3 h-3 rounded-full" style="background:#f59e0b"></span>
                <span>C+~C0</span><span class="ml-auto text-slate-500">7%</span>
              </li>
              <li class="flex items-center gap-2">
                <span class="inline-block w-3 h-3 rounded-full" style="background:#10b981"></span>
                <span>D+~D0</span><span class="ml-auto text-slate-500">0%</span>
              </li>
              <li class="flex items-center gap-2">
                <span class="inline-block w-3 h-3 rounded-full" style="background:#64748b"></span>
                <span>F</span><span class="ml-auto text-slate-500">0%</span>
              </li>
            </ul>
          </div>
        </div>

        <!-- ì´ìˆ˜ í•™ì (ë¶„ë¥˜ë³„) -->
        <div class="bg-white rounded-2xl border shadow-sm p-5 lg:col-span-2">
          <div class="text-sm text-slate-500 mb-3">ì´ìˆ˜ í•™ì  (ë¶„ë¥˜ë³„)</div>

          <!-- êµì–‘ -->
          <div class="mb-4">
            <div class="flex justify-between text-sm">
              <span class="font-medium text-slate-700">êµì–‘</span>
              <span class="tabular-nums text-slate-700">52 / 52</span>
            </div>
            <div class="flex items-center gap-3 mt-2">
              <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                <div class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800" style="width:100%"></div>
              </div>
              <div class="w-10 text-right text-xs font-semibold text-slate-700">100%</div>
            </div>
          </div>

          <!-- ì „ê³µí•„ìˆ˜ -->
          <div class="mb-4">
            <div class="flex justify-between text-sm">
              <span class="font-medium text-slate-700">ì „ê³µí•„ìˆ˜</span>
              <span class="tabular-nums text-slate-700">56 / 65</span>
            </div>
            <div class="flex items-center gap-3 mt-2">
              <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                <div class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800" style="width:86%"></div>
              </div>
              <div class="w-10 text-right text-xs font-semibold text-slate-700">86%</div>
            </div>
          </div>

          <!-- ì „ê³µì„ íƒ -->
          <div>
            <div class="flex justify-between text-sm">
              <span class="font-medium text-slate-700">ì „ê³µì„ íƒ</span>
              <span class="tabular-nums text-slate-700">15 / 16</span>
            </div>
            <div class="flex items-center gap-3 mt-2">
              <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                <div class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800" style="width:94%"></div>
              </div>
              <div class="w-10 text-right text-xs font-semibold text-slate-700">94%</div>
            </div>
          </div>
        </div>
      </div>

      <!-- íŠ¸ë™ ì¶”ì²œ + ì¶”ì²œ ì´ìˆ˜ê³¼ëª© ë¦¬ìŠ¤íŠ¸ -->
      <div class="bg-white rounded-2xl border shadow-sm p-5">
        <div class="text-sm text-slate-500 mb-1">íŠ¸ë™ ì¶”ì²œ</div>
        <div class="text-lg font-semibold">
          ì¶”ì²œ íŠ¸ë™: <span class="text-emerald-600">AI íŠ¸ë™</span>
        </div>
        <div class="mt-1 text-sm text-slate-600 mb-4">
          ì—°ê´€ë„ ì ìˆ˜: 1 â€” ê´€ë ¨ ê³¼ëª©ì„ ë” ë“¤ìœ¼ë©´ ì •í™•ë„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤.
        </div>

        <!-- ì¶”ì²œ ì´ìˆ˜ê³¼ëª© ë¦¬ìŠ¤íŠ¸ -->
        <div class="flex items-center justify-between mb-2">
          <div class="text-sm text-slate-500">ì¶”ì²œ ì´ìˆ˜ê³¼ëª© ë¦¬ìŠ¤íŠ¸</div>
          <button class="text-xs text-blue-600 hover:underline">ìì„¸íˆ ë³´ê¸°</button>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead>
              <tr class="text-left text-slate-500 border-b">
                <th class="py-2 pr-4">ìš°ì„ ìˆœìœ„</th>
                <th class="py-2 pr-4">ê³¼ëª©ëª…</th>
                <th class="py-2 pr-4">ë¶„ë¥˜</th>
                <th class="py-2 pr-4">í•™ì </th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b">
                <td class="py-2 pr-4">1</td>
                <td class="py-2 pr-4">ê¸°ê³„í•™ìŠµ</td>
                <td class="py-2 pr-4">ì „ì„ </td>
                <td class="py-2 pr-4">3</td>
              </tr>
              <tr class="border-b">
                <td class="py-2 pr-4">2</td>
                <td class="py-2 pr-4">ë°ì´í„°ë² ì´ìŠ¤</td>
                <td class="py-2 pr-4">ì „í•„</td>
                <td class="py-2 pr-4">3</td>
              </tr>
              <tr>
                <td class="py-2 pr-4">3</td>
                <td class="py-2 pr-4">í™•ë¥ ê³¼í†µê³„</td>
                <td class="py-2 pr-4">MSC</td>
                <td class="py-2 pr-4">3</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- ìˆ˜ê°• ê³¼ëª© ë¦¬ìŠ¤íŠ¸ -->
      <div class="bg-white rounded-2xl border shadow-sm p-5">
        <div class="flex items-center justify-between">
          <div class="text-sm text-slate-500">ìˆ˜ê°• ê³¼ëª© ë¦¬ìŠ¤íŠ¸</div>
        </div>
        <div class="overflow-x-auto mt-3">
          <table class="min-w-full text-sm">
            <thead>
              <tr class="text-left text-slate-500 border-b">
                <th class="py-2 pr-4">ê³¼ëª©ëª…</th>
                <th class="py-2 pr-4">ë¶„ë¥˜</th>
                <th class="py-2 pr-4">í•™ì </th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b">
                <td class="py-2 pr-4">ìë£Œêµ¬ì¡°</td>
                <td class="py-2 pr-4">ì „í•„</td>
                <td class="py-2 pr-4">3</td>
              </tr>
              <tr class="border-b">
                <td class="py-2 pr-4">ì¸ê³µì§€ëŠ¥ê°œë¡ </td>
                <td class="py-2 pr-4">ì „ì„ </td>
                <td class="py-2 pr-4">3</td>
              </tr>
              <tr>
                <td class="py-2 pr-4">ìš´ì˜ì²´ì œ</td>
                <td class="py-2 pr-4">ì „í•„</td>
                <td class="py-2 pr-4">3</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </section>

    <!-- ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œ -->
    <aside class="lg:col-span-3 flex flex-col space-y-6">

   <!-- í”„ë¡œí•„ (ì´ ì´ìˆ˜ ì§„í–‰ë„ì™€ ë†’ì´ ë™ì¼) -->
<div class="bg-white rounded-2xl border shadow-sm p-5 h-40 flex flex-col justify-between">
  <div class="text-right text-xs text-slate-400">ë² íƒ€</div>
  <div>
    <!-- ì´ë¦„ -->
    <div id="profile-name" class="text-lg font-semibold">ê¹€ì—°ì„¸ë‹˜</div>
    <!-- í•™ë²ˆ / í•™ê¸° -->
    <div id="profile-semester" class="text-sm text-slate-600">20220000 / 2í•™ë…„</div>
    <!-- í•™ê³¼ (ì§€ê¸ˆì€ ë°±ì—”ë“œì— ì—†ìœ¼ë‹ˆê¹Œ ì¼ë‹¨ ê³ ì •ìœ¼ë¡œ ë‘¬ë„ ë¨) -->
    <div id="profile-major" class="text-sm text-slate-600">ì†Œí”„íŠ¸ì›¨ì–´í•™ë¶€</div>
  </div>
</div>

        <!-- ì‹œê°„í‘œ (ì„¸ë¡œ ê¸¸ì´ ì¤„ì„) -->
        <div class="bg-white rounded-2xl border shadow-sm p-5 min-h-[420px]">
            <div class="flex items-center justify-between mb-1">
                <div class="text-sm text-slate-500">ì‹œê°„í‘œ</div>
                <!-- ğŸ”½ ë©”ì¸ ì‹œê°„í‘œìš© í•™ê¸° ì„ íƒ ë“œë¡­ë‹¤ìš´ -->
                <select
                        id="main-timetable-semester-select"
                        class="text-xs border border-slate-200 rounded-lg px-2 py-1 bg-white"
                >
                    <option value="">í•™ê¸° ì„ íƒ</option>
                </select>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full text-sm text-center border-collapse">
                    <thead>
                    <tr class="text-slate-600">
                        <th class="w-16 py-2 border border-slate-200"></th>
                        <th class="py-2 border border-slate-200">ì›”</th>
                        <th class="py-2 border border-slate-200">í™”</th>
                        <th class="py-2 border border-slate-200">ìˆ˜</th>
                        <th class="py-2 border border-slate-200">ëª©</th>
                        <th class="py-2 border border-slate-200">ê¸ˆ</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- ì•„ë˜ row ë“¤ì€ "í‘œì‹œëŠ” 9~5ì‹œ"ì§€ë§Œ, period ëŠ” 1~9ë¡œ ë§¤í•‘ -->
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">9</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="1"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="1"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="1"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="1"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="1"></td>
                    </tr>
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">10</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="2"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="2"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="2"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="2"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="2"></td>
                    </tr>
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">11</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="3"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="3"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="3"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="3"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="3"></td>
                    </tr>
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">12</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="4"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="4"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="4"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="4"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="4"></td>
                    </tr>
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">1</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="5"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="5"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="5"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="5"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="5"></td>
                    </tr>
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">2</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="6"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="6"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="6"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="6"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="6"></td>
                    </tr>
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">3</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="7"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="7"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="7"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="7"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="7"></td>
                    </tr>
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">4</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="8"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="8"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="8"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="8"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="8"></td>
                    </tr>
                    <tr>
                        <td class="py-2 border border-slate-200 text-slate-500">5</td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="MON" data-period="9"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="TUE" data-period="9"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="WED" data-period="9"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="THU" data-period="9"></td>
                        <td class="h-10 border border-slate-200 main-tt-cell" data-day="FRI" data-period="9"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>




        <!-- ì±„í”Œ ì¹´ìš´íŠ¸ -->
      <div class="bg-white rounded-2xl border shadow-sm p-5">
        <div class="text-sm text-slate-500 mb-3">ì±„í”Œ ì¹´ìš´íŠ¸</div>
        <div class="flex items-center gap-2">
          <input
            id="chapel-input"
            type="number"
            min="0"
            max="4"
            value="0"
            class="w-20 px-3 py-2 rounded-xl border text-sm text-center"
          />
          <span class="text-slate-500 text-sm">/ 4</span>
          <span id="chapel-percent" class="ml-auto text-sm font-semibold text-emerald-600">0%</span>
        </div>
        <div class="mt-3 h-2 bg-slate-100 rounded-full overflow-hidden">
          <div
            id="chapel-bar"
            class="h-full bg-gradient-to-r from-blue-200 via-blue-500 to-blue-800"
            style="width:0%"
          ></div>
        </div>
      </div>

      <!-- ì¡¸ì—… ìš”êµ¬ì‚¬í•­ ë©”ëª¨ -->
      <div class="bg-white rounded-2xl border shadow-sm p-5">
        <div class="text-sm text-slate-500 mb-2">ì¡¸ì—… ìš”êµ¬ì‚¬í•­ (ë©”ëª¨)</div>
        <textarea
          id="memo-text"
          class="w-full h-40 rounded-2xl border px-3 py-2 text-sm resize-none"
          placeholder="- ì¡¸ì—…ì‘í’ˆ / ì¡¸ì—…ë…¼ë¬¸ ì¤‘ íƒ1&#10;- í† ìµ 800+"
        >- ì¡¸ì—…ì‘í’ˆ / ì¡¸ì—…ë…¼ë¬¸ ì¤‘ íƒ1
- í† ìµ 800+</textarea>
      </div>

    </aside>
  </main>

  <!-- ê³µí†µ í‘¸í„° (ê³ ì •) -->
  <footer class="fixed bottom-0 inset-x-0 bg-white border-t">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex items-start justify-between">
      <div class="flex items-start gap-4">
        <img src="../img/ycheck_logo.png" alt="Y-CHECK ë¡œê³ " class="h-6 w-auto" />
        <div class="space-y-1 text-sm text-slate-600 leading-relaxed">
          <div>ê°•ì›íŠ¹ë³„ìì¹˜ë„ ì›ì£¼ì‹œ í¥ì—…ë©´ ì—°ì„¸ëŒ€ê¸¸ 1 ì°½ì¡°ê´€</div>
          <div>TEL) 033-123-4567</div>
          <div>EMAIL: YCHECK@gmail.com</div>
        </div>
      </div>
      <div class="flex items-center gap-6 text-sm text-slate-600">
        <span class="hidden sm:block h-6 w-px bg-slate-200"></span>
        <span>ë§Œë“ ì´ë“¤</span>
        <span>ë¬¸ì˜í•˜ê¸°</span>
      </div>
    </div>
  </footer>

  <!-- ì±„í”Œ / ë©”ëª¨ ë¡œì»¬ ì €ì¥ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    const STATE_KEY = "ycheck-main-state-v1";

    const chapelInput = document.getElementById("chapel-input");
    const chapelBar = document.getElementById("chapel-bar");
    const chapelPercent = document.getElementById("chapel-percent");
    const memoText = document.getElementById("memo-text");

    function loadState() {
      try {
        const raw = localStorage.getItem(STATE_KEY);
        if (!raw) return;
        const state = JSON.parse(raw);
        if (typeof state.chapel === "number" && chapelInput) {
          chapelInput.value = state.chapel;
        }
        if (typeof state.memo === "string" && memoText) {
          memoText.value = state.memo;
        }
      } catch (e) {
        console.warn("state load error", e);
      }
    }

    function saveState() {
      try {
        const data = {
          chapel: chapelInput ? Number(chapelInput.value || 0) : 0,
          memo: memoText ? memoText.value : ""
        };
        localStorage.setItem(STATE_KEY, JSON.stringify(data));
      } catch (e) {
        console.warn("state save error", e);
      }
    }

    function updateChapelUI() {
      if (!chapelInput || !chapelBar || !chapelPercent) return;
      const max = 4;
      let v = Number(chapelInput.value || 0);
      if (!Number.isFinite(v)) v = 0;
      if (v < 0) v = 0;
      if (v > max) v = max;
      chapelInput.value = v;
      const pct = Math.round((v / max) * 100);
      chapelBar.style.width = pct + "%";
      chapelPercent.textContent = pct + "%";
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadState();
      updateChapelUI();

      if (chapelInput) {
        chapelInput.addEventListener("input", () => {
          updateChapelUI();
          saveState();
        });
      }
      if (memoText) {
        memoText.addEventListener("input", () => {
          saveState();
        });
      }
    });
  </script>

  <!-- ë©”ì¸ í˜ì´ì§€ â€“ ì‹œê°„í‘œ ì¶•ì†ŒíŒ + í•™ê¸° ë“œë¡­ë‹¤ìš´ -->
  <script>
      const MAIN_TT_STORAGE_YEAR = "main_timetable_year";
      const MAIN_TT_STORAGE_SEM = "main_timetable_semester";

      const mainTtCells = document.querySelectorAll(".main-tt-cell");
      const mainTtSemesterSelect = document.getElementById("main-timetable-semester-select");

      function clearMainTimetable() {
        mainTtCells.forEach((td) => {
          td.innerHTML = "";
        });
      }

      function formatSemesterLabel(year, semester) {
        return `${year}ë…„ ${semester}í•™ê¸°`;
      }

      async function fetchMainSemesters() {
        try {
          const res = await fetch("/api/timetable/semesters/", {
            method: "GET",
            credentials: "include",
          });

          if (!res.ok) {
            console.error("ë©”ì¸ ì‹œê°„í‘œ: í•™ê¸° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨", res.status, res.statusText);
            return [];
          }

          const data = await res.json();
          if (Array.isArray(data)) return data;
          if (data && Array.isArray(data.semesters)) return data.semesters;
          return [];
        } catch (err) {
          console.error("ë©”ì¸ ì‹œê°„í‘œ: í•™ê¸° ëª©ë¡ ë¡œë”© ì¤‘ ì˜¤ë¥˜", err);
          return [];
        }
      }

      async function fetchMainTimetable(year, semester) {
        try {
          const res = await fetch(`/api/timetable/?year=${year}&semester=${semester}`, {
            method: "GET",
            credentials: "include",
          });

          clearMainTimetable();

          if (res.status === 404) {
            console.log("ë©”ì¸ ì‹œê°„í‘œ: í•´ë‹¹ í•™ê¸° ì‹œê°„í‘œ ì—†ìŒ");
            return;
          }

          if (!res.ok) {
            console.error("ë©”ì¸ ì‹œê°„í‘œ: ì‹œê°„í‘œ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨", res.status, res.statusText);
            return;
          }

          const data = await res.json();
          const entries = Array.isArray(data) ? data : (data.timetable || []);

          entries.forEach((item) => {
            const selector = `.main-tt-cell[data-day="${item.day}"][data-period="${item.period}"]`;
            const cell = document.querySelector(selector);
            if (!cell) return;

            const subject = item.subject || "";
            cell.innerHTML = `<div class="text-[10px] sm:text-xs font-medium truncate">${subject}</div>`;
          });

          // ë“œë¡­ë‹¤ìš´ ê°’ ë™ê¸°í™” + ë¡œì»¬ ì €ì¥
          if (mainTtSemesterSelect) {
            mainTtSemesterSelect.value = `${year}-${semester}`;
          }
          localStorage.setItem(MAIN_TT_STORAGE_YEAR, String(year));
          localStorage.setItem(MAIN_TT_STORAGE_SEM, String(semester));
        } catch (err) {
          console.error("ë©”ì¸ ì‹œê°„í‘œ: ì‹œê°„í‘œ ë¡œë”© ì¤‘ ì˜¤ë¥˜", err);
        }
      }

      async function initMainTimetable() {
        const semesters = await fetchMainSemesters();
        if (!semesters.length) {
          clearMainTimetable();
          if (mainTtSemesterSelect) {
            mainTtSemesterSelect.innerHTML = '<option value="">í•™ê¸° ì—†ìŒ</option>';
          }
          return;
        }

        // ë“œë¡­ë‹¤ìš´ ì˜µì…˜ êµ¬ì„±
        if (mainTtSemesterSelect) {
          mainTtSemesterSelect.innerHTML = "";
          semesters.forEach((s) => {
            const opt = document.createElement("option");
            opt.value = `${s.year}-${s.semester}`;
            opt.textContent = s.label || formatSemesterLabel(s.year, s.semester);
            mainTtSemesterSelect.appendChild(opt);
          });
        }

        // 1) localStorage ì— ì €ì¥ëœ í•™ê¸° ìš°ì„ 
        let initial = null;
        const savedYearStr = localStorage.getItem(MAIN_TT_STORAGE_YEAR);
        const savedSemStr = localStorage.getItem(MAIN_TT_STORAGE_SEM);
        const savedYear = savedYearStr ? parseInt(savedYearStr, 10) : NaN;
        const savedSem = savedSemStr ? parseInt(savedSemStr, 10) : NaN;

        if (!Number.isNaN(savedYear) && !Number.isNaN(savedSem)) {
          initial =
            semesters.find(
              (s) => s.year === savedYear && s.semester === savedSem
            ) || null;
        }

        // 2) ì—†ìœ¼ë©´ ê°€ì¥ ìµœê·¼ í•™ê¸° (ì¿¼ë¦¬ì…‹ì´ -year, -semester ë¡œ ì •ë ¬ë˜ì–´ ìˆë‹¤ê³  ê°€ì • â†’ ì²« ë²ˆì§¸)
        if (!initial) {
          initial = semesters[0];
        }

        if (!initial) {
          clearMainTimetable();
          return;
        }

        await fetchMainTimetable(initial.year, initial.semester);
      }

      document.addEventListener("DOMContentLoaded", () => {
        initMainTimetable();

        // ë“œë¡­ë‹¤ìš´ì—ì„œ í•™ê¸° ë°”ê¿€ ë•Œ
        if (mainTtSemesterSelect) {
          mainTtSemesterSelect.addEventListener("change", (e) => {
            const value = e.target.value;
            if (!value) return;
            const [y, s] = value.split("-");
            const year = parseInt(y, 10);
            const semester = parseInt(s, 10);
            if (!Number.isNaN(year) && !Number.isNaN(semester)) {
              fetchMainTimetable(year, semester);
            }
          });
        }
      });
  </script>




  <!-- âœ… ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ìŠ¤í¬ë¦½íŠ¸ (ìƒˆë¡œ ì¶”ê°€) -->
  <script>
    async function applyLoginStatus() {
      const nameEl = document.getElementById("profile-name");
      const semesterEl = document.getElementById("profile-semester");

      try {
        const resp = await fetch("http://localhost:8000/api/login-status/", {
          method: "GET",
          credentials: "include", // ì„¸ì…˜ ì¿ í‚¤ ê°™ì´ ë³´ë‚´ê¸°
        });

        if (!resp.ok) {
          console.log("ë¡œê·¸ì¸ ì•ˆ ëœ ìƒíƒœ (status:", resp.status, ")");
          // í•„ìš”í•˜ë©´ ì—¬ê¸°ì„œ login.htmlë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë„ ê°€ëŠ¥:
          // window.location.href = "login.html";
          return;
        }

        const data = await resp.json();
        if (!data.logged_in) {
          console.log("logged_in == false");
          return;
        }

        // ì´ë¦„ / í•™ë²ˆ / í•™ê¸° UI ë°˜ì˜
        if (data.profile) {
          if (nameEl && data.profile.real_name) {
            nameEl.textContent = data.profile.real_name + "ë‹˜";
          }
          if (semesterEl && data.profile.student_id) {
            const sem = data.profile.current_semester || "";
            semesterEl.textContent = data.profile.student_id + (sem ? " / " + sem : "");
          }
        }
      } catch (e) {
        console.error("login-status ìš”ì²­ ì¤‘ ì˜¤ë¥˜:", e);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      applyLoginStatus();
    });
  </script>
</body>
</html>
